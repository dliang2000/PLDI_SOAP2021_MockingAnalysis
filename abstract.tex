\begin{abstract}
Unit testing is a widely used tool in modern software development processes. A well-known issue in writing tests is handling dependencies: creating usable objects for dependencies is often complicated or infeasible. Developers must therefore often introduce mock objects to stand in for dependencies during testing. 

We believe that the static analysis of test suites can enable developers to better understand and maintain existing test suites. However, because mock objects are created using reflection, they confound existing static analysis techniques. At present, it is impossible to statically distinguish methods invoked on mock objects from methods invoked on real objects. 

Researchers have started to build static analyses and developer tools for manipulating test cases. However, such tools currently cannot determine which dependencies' methods are actually tested, versus mock methods being called. As a specific example, removing confounding mock invocations from consideration as focal methods can improve the precision of analyses to detect focal methods under test, which is useful in itself and also a key prerequisite to further analysis of test cases.

In this paper, we introduce MockDetector, a technique to identify mock objects and pinpoint method invocations on mock objects. MockDetector locates common Java mock libraries' APIs for creating mock objects and propagates this information through test cases. Following our observations of tests in the wild, we have added special-case support for arrays and collections holding mock objects. We have built two implementations of MockDetector: a Soot-based imperative dataflow analysis implementation, as well as a Doop-based declarative analysis. On our suite of 8 open-source benchmarks, our imperative intraprocedural approach reported 2,095 invocations on mock objects, whereas our declarative interprocedural approach reported 5,315 invocations on mock objects (under context-insensitve base analyses), out of a total number of 63,017 method invocations in test suites; across benchmarks, mock invocations accounted for a range from 0.086\% to 31.8\% of the total invocations in tests.
	
\end{abstract}
